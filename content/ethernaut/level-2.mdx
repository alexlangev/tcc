---
title: Level 2 - Fallout
slug: level-2
published: 05-15-2023
lastEdited:
imgSrc: /images/ethernaut/ethernaut2.svg
---

## Objectives

1. Claim ownership of the contract.

## Vulnerabilities

### Old syntax of declaring a constructor

In Solidity version 0.6.0 you could create a `constructor` function by creating a _public function with the same name as the
contract_. This wasn't the best idea since having **a single typo** would result in creating a **public function that handles
critical behavior**. In this level, the contract is named `Fallout` but the function supposed to be the `constructor` is named `Fal1out`.

```solidity
function Fal1out() public payable {

  function Fal1out() public payable {
    owner = msg.sender;
    allocations[owner] = msg.value;
  }

}
```

The function `Fal1out` is therefore a **public function that gives the ownership to the** `msg.sender`.

## Exploit

1. Call the `Fal1out` function. This will **transfer the ownership to you**.

## Suggested mitigation

- Fix the typo to `Fallout`.
- If possible, update the Solidity version to at least 0.8.0 and use the `constructor` keyword instead, like
  the following:

```solidity
constructor() {
  owner = msg.sender;
  allocations[owner] = msg.value;
}
```

## Further reading

- SWC-118 - Incorrect constructor name <ExternalLink href={"https://swcregistry.io/docs/SWC-118"} />
- Example of using the constructor keyword <ExternalLink href={"https://solidity-by-example.org/constructor/"} />
